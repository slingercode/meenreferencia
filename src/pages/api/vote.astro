---
import { connectRedis } from "../../lib/redis";

const redis = connectRedis();

const formData = await Astro.request.formData();

const key = formData.get("key") ?? "";

let count = (await redis.get<number>(key.toString())) ?? 0;

count += 1;

await redis.set(key.toString(), count);
---

{count}
